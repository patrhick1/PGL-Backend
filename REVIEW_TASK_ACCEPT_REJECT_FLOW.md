
# PGL Review Task Accept/Reject Flow

This document describes the process for reviewing and approving or rejecting tasks within the PGL system, with a focus on the pitch review workflow.

## 1. The Review Task System

The review task system is a critical component of the quality control process. It ensures that all generated content, such as pitches, meets the required standards before it is sent to external partners.

*   **Purpose:** To provide a formal process for reviewing and approving or rejecting tasks.
*   **Key Components:**
    *   **API Endpoint:** `/api/review_tasks/`
    *   **Database Table:** `review_tasks`
    *   **UI:** A dedicated interface in the frontend for managing review tasks.

## 2. The Pitch Review Workflow

The most common use of the review task system is for approving pitches.

### 2.1. Task Creation

*   **Action:** A new review task is created for each generated pitch.
*   **Process:**
    1.  When a new pitch is generated by the `Pitch Generator Service`, a corresponding review task is automatically created.
    2.  The task is assigned to the appropriate user (e.g., an account manager or the client).
    3.  The task is given a status of `pending`.

### 2.2. The Review Process

*   **Action:** The assigned user reviews the pitch.
*   **Process:**
    1.  The user navigates to the review tasks section of the UI.
    2.  They open the task to view the details of the pitch, including the subject, body, and target podcast.
    3.  The user has three options:
        *   **Approve:** If the pitch is satisfactory, the user approves it.
        *   **Reject:** If the pitch is not satisfactory, the user rejects it.
        *   **Edit and Approve:** The user can make minor edits to the pitch and then approve it.

### 2.3. The Approve Flow

*   **Action:** The user approves the pitch.
*   **Process:**
    1.  The user clicks the "Approve" button.
    2.  The status of the review task is updated to `approved`.
    3.  The status of the corresponding pitch is updated to `approved`.
    4.  The pitch is now ready to be sent.

### 2.4. The Reject Flow

*   **Action:** The user rejects the pitch.
*   **Process:**
    1.  The user clicks the "Reject" button.
    2.  The user is prompted to provide a reason for the rejection.
    3.  The status of the review task is updated to `rejected`.
    4.  The status of the corresponding pitch is updated to `rejected`.
    5.  The pitch is sent back to the pitch generation step, along with the feedback provided by the user. The `Pitch Generator Service` will then attempt to create a new and improved version of the pitch.

## 3. API Endpoints

The following API endpoints are used to manage review tasks:

*   `GET /api/review_tasks/`: Get a list of review tasks.
*   `GET /api/review_tasks/{task_id}`: Get a specific review task.
*   `PUT /api/review_tasks/{task_id}`: Update a review task (e.g., to approve or reject it).

This review system ensures that all content is of high quality and meets the client's expectations before it is sent out.
